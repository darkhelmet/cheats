
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../python/transformers/">
      
      
        <link rel="next" href="../ripgrep/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Protocol Buffers (protobuf) - Cheat Sheets</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bcfcd587.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#protocol-buffers-protobuf" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Cheat Sheets" class="md-header__button md-logo" aria-label="Cheat Sheets" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cheat Sheets
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Protocol Buffers (protobuf)
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Cheat Sheets" class="md-nav__button md-logo" aria-label="Cheat Sheets" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Cheat Sheets
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cheat Sheets Collection
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../machine-learning-algorithms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Machine Learning Algorithms
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Gpu
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Gpu
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gpu/cuda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CUDA Programming
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Javascript
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Javascript
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/nextjs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Next.js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Os
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Os
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../os/bottlerocket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bottlerocket OS Administration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/inquirer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python Inquirer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/keras/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Keras
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/langchain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LangChain
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/langextract/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LangExtract
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/matplotlib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Matplotlib
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/nltk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NLTK (Natural Language Toolkit)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/numpy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NumPy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/pandas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pandas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/pillow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pillow (PIL)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/polars/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Polars
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/pytorch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/scikit-learn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scikit-learn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/scipy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SciPy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/seaborn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seaborn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/sentence-transformers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sentence-Transformers (UKPLab)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/tensorflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TensorFlow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/torchvision/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TorchVision
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/transformers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transformers (Hugging Face)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Protocol Buffers (protobuf)
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Protocol Buffers (protobuf)
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#language-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Language Plugins
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Core Concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proto-file-structure" class="md-nav__link">
    <span class="md-ellipsis">
      .proto File Structure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      Message Definitions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Message Definitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-message" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Nested Messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#field-rules-proto2-vs-proto3" class="md-nav__link">
    <span class="md-ellipsis">
      Field Rules (Proto2 vs Proto3)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scalar-types" class="md-nav__link">
    <span class="md-ellipsis">
      Scalar Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scalar Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#numeric-types" class="md-nav__link">
    <span class="md-ellipsis">
      Numeric Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string-and-bytes" class="md-nav__link">
    <span class="md-ellipsis">
      String and Bytes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#complex-types" class="md-nav__link">
    <span class="md-ellipsis">
      Complex Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Complex Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enumerations" class="md-nav__link">
    <span class="md-ellipsis">
      Enumerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repeated-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Repeated Fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maps" class="md-nav__link">
    <span class="md-ellipsis">
      Maps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oneof-union-types" class="md-nav__link">
    <span class="md-ellipsis">
      Oneof (Union Types)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-features" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#any-type" class="md-nav__link">
    <span class="md-ellipsis">
      Any Type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#well-known-types" class="md-nav__link">
    <span class="md-ellipsis">
      Well-Known Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#field-options" class="md-nav__link">
    <span class="md-ellipsis">
      Field Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reserved-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Reserved Fields
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#services-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      Services (gRPC)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Services (gRPC)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-service-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Service Definition
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilation-with-protoc" class="md-nav__link">
    <span class="md-ellipsis">
      Compilation with protoc
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compilation with protoc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#language-specific-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Language-Specific Generation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Language-Specific Generation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#go" class="md-nav__link">
    <span class="md-ellipsis">
      Go
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    <span class="md-ellipsis">
      Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#javakotlin" class="md-nav__link">
    <span class="md-ellipsis">
      Java/Kotlin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#javascripttypescript" class="md-nav__link">
    <span class="md-ellipsis">
      JavaScript/TypeScript
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c" class="md-nav__link">
    <span class="md-ellipsis">
      C++
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c_1" class="md-nav__link">
    <span class="md-ellipsis">
      C
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-protoc-options" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced protoc Options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced protoc Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-files-and-directories" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Files and Directories
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descriptor-sets" class="md-nav__link">
    <span class="md-ellipsis">
      Descriptor Sets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Plugins
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Build Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#makefile" class="md-nav__link">
    <span class="md-ellipsis">
      Makefile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmake" class="md-nav__link">
    <span class="md-ellipsis">
      CMake
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bazel" class="md-nav__link">
    <span class="md-ellipsis">
      Bazel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schema-design" class="md-nav__link">
    <span class="md-ellipsis">
      Schema Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#field-numbering" class="md-nav__link">
    <span class="md-ellipsis">
      Field Numbering
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#versioning-and-evolution" class="md-nav__link">
    <span class="md-ellipsis">
      Versioning and Evolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Considerations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Common Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requestresponse-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Request/Response Patterns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gotchas-and-common-mistakes" class="md-nav__link">
    <span class="md-ellipsis">
      Gotchas and Common Mistakes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gotchas and Common Mistakes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#field-number-management" class="md-nav__link">
    <span class="md-ellipsis">
      Field Number Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-values-and-presence" class="md-nav__link">
    <span class="md-ellipsis">
      Default Values and Presence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#package-and-import-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Package and Import Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compilation-ordering" class="md-nav__link">
    <span class="md-ellipsis">
      Compilation Ordering
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Reference
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#essential-protoc-flags" class="md-nav__link">
    <span class="md-ellipsis">
      Essential protoc Flags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scalar-type-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Scalar Type Mapping
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ripgrep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ripgrep (rg)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vim-lazyvim/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vim/Neovim with LazyVim
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#language-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Language Plugins
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Core Concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proto-file-structure" class="md-nav__link">
    <span class="md-ellipsis">
      .proto File Structure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      Message Definitions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Message Definitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-message" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Nested Messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#field-rules-proto2-vs-proto3" class="md-nav__link">
    <span class="md-ellipsis">
      Field Rules (Proto2 vs Proto3)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scalar-types" class="md-nav__link">
    <span class="md-ellipsis">
      Scalar Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scalar Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#numeric-types" class="md-nav__link">
    <span class="md-ellipsis">
      Numeric Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string-and-bytes" class="md-nav__link">
    <span class="md-ellipsis">
      String and Bytes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#complex-types" class="md-nav__link">
    <span class="md-ellipsis">
      Complex Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Complex Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enumerations" class="md-nav__link">
    <span class="md-ellipsis">
      Enumerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repeated-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Repeated Fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maps" class="md-nav__link">
    <span class="md-ellipsis">
      Maps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oneof-union-types" class="md-nav__link">
    <span class="md-ellipsis">
      Oneof (Union Types)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-features" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#any-type" class="md-nav__link">
    <span class="md-ellipsis">
      Any Type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#well-known-types" class="md-nav__link">
    <span class="md-ellipsis">
      Well-Known Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#field-options" class="md-nav__link">
    <span class="md-ellipsis">
      Field Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reserved-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Reserved Fields
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#services-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      Services (gRPC)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Services (gRPC)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-service-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Service Definition
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilation-with-protoc" class="md-nav__link">
    <span class="md-ellipsis">
      Compilation with protoc
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compilation with protoc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#language-specific-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Language-Specific Generation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Language-Specific Generation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#go" class="md-nav__link">
    <span class="md-ellipsis">
      Go
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    <span class="md-ellipsis">
      Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#javakotlin" class="md-nav__link">
    <span class="md-ellipsis">
      Java/Kotlin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#javascripttypescript" class="md-nav__link">
    <span class="md-ellipsis">
      JavaScript/TypeScript
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c" class="md-nav__link">
    <span class="md-ellipsis">
      C++
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c_1" class="md-nav__link">
    <span class="md-ellipsis">
      C
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-protoc-options" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced protoc Options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced protoc Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-files-and-directories" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Files and Directories
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descriptor-sets" class="md-nav__link">
    <span class="md-ellipsis">
      Descriptor Sets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Plugins
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Build Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#makefile" class="md-nav__link">
    <span class="md-ellipsis">
      Makefile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmake" class="md-nav__link">
    <span class="md-ellipsis">
      CMake
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bazel" class="md-nav__link">
    <span class="md-ellipsis">
      Bazel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schema-design" class="md-nav__link">
    <span class="md-ellipsis">
      Schema Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#field-numbering" class="md-nav__link">
    <span class="md-ellipsis">
      Field Numbering
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#versioning-and-evolution" class="md-nav__link">
    <span class="md-ellipsis">
      Versioning and Evolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Considerations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Common Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requestresponse-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Request/Response Patterns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gotchas-and-common-mistakes" class="md-nav__link">
    <span class="md-ellipsis">
      Gotchas and Common Mistakes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gotchas and Common Mistakes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#field-number-management" class="md-nav__link">
    <span class="md-ellipsis">
      Field Number Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-values-and-presence" class="md-nav__link">
    <span class="md-ellipsis">
      Default Values and Presence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#package-and-import-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Package and Import Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compilation-ordering" class="md-nav__link">
    <span class="md-ellipsis">
      Compilation Ordering
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Reference
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#essential-protoc-flags" class="md-nav__link">
    <span class="md-ellipsis">
      Essential protoc Flags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scalar-type-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Scalar Type Mapping
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="protocol-buffers-protobuf">Protocol Buffers (protobuf)</h1>
<p>Protocol Buffers is Google's language-neutral, platform-neutral mechanism for serializing structured data. This guide covers .proto file syntax and compilation with <code>protoc</code>.</p>
<h2 id="quick-start">Quick Start</h2>
<h3 id="installation">Installation</h3>
<pre><code class="language-bash"># Install protoc compiler (Linux/Mac)
# From https://github.com/protocolbuffers/protobuf/releases
curl -LO https://github.com/protocolbuffers/protobuf/releases/download/v27.0/protoc-27.0-linux-x86_64.zip
unzip protoc-27.0-linux-x86_64.zip -d protoc
sudo cp protoc/bin/protoc /usr/local/bin/
sudo cp -r protoc/include/google /usr/local/include/

# Verify installation
protoc --version
</code></pre>
<h3 id="language-plugins">Language Plugins</h3>
<pre><code class="language-bash"># Go
go install google.golang.org/protobuf/cmd/protoc-gen-go@latest

# Python (included with protobuf library)
pip install protobuf

# Java/Kotlin (built into protoc)
# JavaScript/TypeScript
npm install -g @protobuf-ts/plugin
</code></pre>
<h2 id="core-concepts">Core Concepts</h2>
<h3 id="proto-file-structure">.proto File Structure</h3>
<pre><code class="language-proto">// File header
syntax = &quot;proto3&quot;;  // or &quot;proto2&quot; or edition = &quot;2024&quot;
package com.example;

// Imports
import &quot;google/protobuf/timestamp.proto&quot;;

// Options
option java_package = &quot;com.example.proto&quot;;
option go_package = &quot;./proto&quot;;

// Message definitions
message Person {
  string name = 1;
  int32 age = 2;
}
</code></pre>
<h2 id="message-definitions">Message Definitions</h2>
<h3 id="basic-message">Basic Message</h3>
<pre><code class="language-proto">syntax = &quot;proto3&quot;;

message User {
  int32 id = 1;           // Field number must be unique
  string username = 2;
  string email = 3;
  bool active = 4;
}
</code></pre>
<h3 id="nested-messages">Nested Messages</h3>
<pre><code class="language-proto">message Person {
  string name = 1;

  message Address {
    string street = 1;
    string city = 2;
    string country = 3;
  }

  Address address = 2;
}
</code></pre>
<h3 id="field-rules-proto2-vs-proto3">Field Rules (Proto2 vs Proto3)</h3>
<pre><code class="language-proto">// Proto2
syntax = &quot;proto2&quot;;
message User {
  required string name = 1;    // Must be provided
  optional int32 age = 2;      // Can be omitted
  repeated string tags = 3;    // Can have 0 or more values
}

// Proto3 (more common)
syntax = &quot;proto3&quot;;
message User {
  string name = 1;             // Implicit presence
  optional int32 age = 2;      // Explicit presence (proto3.15+)
  repeated string tags = 3;    // 0 or more values
}
</code></pre>
<h2 id="scalar-types">Scalar Types</h2>
<h3 id="numeric-types">Numeric Types</h3>
<pre><code class="language-proto">message NumericTypes {
  double price = 1;      // 64-bit floating point
  float rating = 2;      // 32-bit floating point

  int32 count = 3;       // Variable-length encoding
  int64 big_count = 4;   // Variable-length encoding

  uint32 positive = 5;   // Variable-length encoding
  uint64 big_positive = 6;

  sint32 signed_val = 7;  // Better for negative numbers
  sint64 big_signed = 8;

  fixed32 fixed_val = 9;  // Always 4 bytes
  fixed64 big_fixed = 10; // Always 8 bytes

  sfixed32 signed_fixed = 11; // Always 4 bytes, signed
  sfixed64 big_signed_fixed = 12; // Always 8 bytes, signed

  bool enabled = 13;
}
</code></pre>
<h3 id="string-and-bytes">String and Bytes</h3>
<pre><code class="language-proto">message TextTypes {
  string text = 1;       // UTF-8 encoded string
  bytes data = 2;        // Arbitrary byte sequence
}
</code></pre>
<h2 id="complex-types">Complex Types</h2>
<h3 id="enumerations">Enumerations</h3>
<pre><code class="language-proto">enum Status {
  UNKNOWN = 0;    // First value must be 0 in proto3
  PENDING = 1;
  APPROVED = 2;
  REJECTED = 3;
}

message Request {
  Status status = 1;
}
</code></pre>
<h3 id="repeated-fields">Repeated Fields</h3>
<pre><code class="language-proto">message ShoppingCart {
  repeated string items = 1;              // List of strings
  repeated int32 quantities = 2;          // List of integers
  repeated Product products = 3;          // List of messages
}

// With packed encoding (more efficient for primitives)
message Measurements {
  repeated int32 values = 1 [packed = true];
}
</code></pre>
<h3 id="maps">Maps</h3>
<pre><code class="language-proto">message UserSettings {
  map&lt;string, string&gt; preferences = 1;    // String to string
  map&lt;int32, User&gt; users_by_id = 2;      // Integer to message
  map&lt;string, bool&gt; features = 3;        // String to boolean
}
</code></pre>
<h3 id="oneof-union-types">Oneof (Union Types)</h3>
<pre><code class="language-proto">message SearchRequest {
  string query = 1;

  oneof filter {
    string category = 2;
    int32 price_max = 3;
    bool on_sale = 4;
  }
}
</code></pre>
<h2 id="advanced-features">Advanced Features</h2>
<h3 id="any-type">Any Type</h3>
<pre><code class="language-proto">import &quot;google/protobuf/any.proto&quot;;

message ErrorInfo {
  string message = 1;
  google.protobuf.Any details = 2;  // Can contain any message type
}
</code></pre>
<h3 id="well-known-types">Well-Known Types</h3>
<pre><code class="language-proto">import &quot;google/protobuf/timestamp.proto&quot;;
import &quot;google/protobuf/duration.proto&quot;;
import &quot;google/protobuf/empty.proto&quot;;
import &quot;google/protobuf/struct.proto&quot;;

message Event {
  google.protobuf.Timestamp created_at = 1;
  google.protobuf.Duration timeout = 2;
  google.protobuf.Struct metadata = 3;
}
</code></pre>
<h3 id="field-options">Field Options</h3>
<pre><code class="language-proto">message Product {
  string name = 1;
  double price = 2 [(validate.rules).double.gt = 0];  // Custom validation
  string description = 3 [deprecated = true];         // Mark as deprecated
}
</code></pre>
<h3 id="reserved-fields">Reserved Fields</h3>
<pre><code class="language-proto">message User {
  reserved 2, 15, 9 to 11;           // Reserve field numbers
  reserved &quot;old_name&quot;, &quot;legacy_id&quot;;  // Reserve field names

  string name = 1;
  string email = 3;
  // Field 2 is reserved and cannot be used
}
</code></pre>
<h2 id="services-grpc">Services (gRPC)</h2>
<h3 id="basic-service-definition">Basic Service Definition</h3>
<pre><code class="language-proto">syntax = &quot;proto3&quot;;

service UserService {
  // Unary RPC
  rpc GetUser(GetUserRequest) returns (User);

  // Server streaming
  rpc ListUsers(ListUsersRequest) returns (stream User);

  // Client streaming
  rpc CreateUsers(stream CreateUserRequest) returns (CreateUsersResponse);

  // Bidirectional streaming
  rpc Chat(stream ChatMessage) returns (stream ChatMessage);
}

message GetUserRequest {
  int32 user_id = 1;
}

message ListUsersRequest {
  int32 page_size = 1;
  string page_token = 2;
}

message CreateUserRequest {
  User user = 1;
}

message CreateUsersResponse {
  repeated User users = 1;
}

message ChatMessage {
  string message = 1;
  string user_id = 2;
}
</code></pre>
<h2 id="compilation-with-protoc">Compilation with protoc</h2>
<h3 id="basic-usage">Basic Usage</h3>
<pre><code class="language-bash"># Check version
protoc --version

# Generate code for single language
protoc --python_out=./generated user.proto

# Generate for multiple languages
protoc --java_out=./java --python_out=./python --go_out=./go user.proto

# Specify import paths
protoc -I./protos -I./vendor --python_out=./generated protos/user.proto
</code></pre>
<h3 id="language-specific-generation">Language-Specific Generation</h3>
<h4 id="go">Go</h4>
<pre><code class="language-bash"># Basic Go generation
protoc --go_out=. --go_opt=paths=source_relative user.proto

# With gRPC
protoc --go_out=. --go-grpc_out=. \
  --go_opt=paths=source_relative \
  --go-grpc_opt=paths=source_relative \
  user.proto

# Custom Go package
protoc --go_out=. --go_opt=Muser.proto=./internal/proto user.proto
</code></pre>
<h4 id="python">Python</h4>
<pre><code class="language-bash"># Basic Python generation
protoc --python_out=./generated user.proto

# With type stubs (.pyi files)
protoc --python_out=./generated --pyi_out=./generated user.proto

# With gRPC
protoc --python_out=./generated --grpc_python_out=./generated user.proto
</code></pre>
<h4 id="javakotlin">Java/Kotlin</h4>
<pre><code class="language-bash"># Java
protoc --java_out=./src/main/java user.proto

# Java Lite (smaller runtime)
protoc --java_out=lite:./src/main/java user.proto

# Kotlin
protoc --java_out=./src/main/java --kotlin_out=./src/main/kotlin user.proto
</code></pre>
<h4 id="javascripttypescript">JavaScript/TypeScript</h4>
<pre><code class="language-bash"># JavaScript
protoc --js_out=import_style=commonjs,binary:./generated user.proto

# TypeScript with protobuf-ts
protoc --ts_out=./generated user.proto
</code></pre>
<h4 id="c">C++</h4>
<pre><code class="language-bash"># C++
protoc --cpp_out=./generated user.proto

# With gRPC
protoc --cpp_out=./generated --grpc_out=./generated \
  --plugin=protoc-gen-grpc=grpc_cpp_plugin user.proto
</code></pre>
<h4 id="c_1">C</h4>
<pre><code class="language-bash"># C#
protoc --csharp_out=./Generated user.proto

# With gRPC
protoc --csharp_out=./Generated --grpc_out=./Generated \
  --plugin=protoc-gen-grpc=grpc_csharp_plugin user.proto
</code></pre>
<h3 id="advanced-protoc-options">Advanced protoc Options</h3>
<h4 id="multiple-files-and-directories">Multiple Files and Directories</h4>
<pre><code class="language-bash"># Compile all .proto files in directory
protoc --python_out=./generated protos/*.proto

# Recursive compilation
find ./protos -name &quot;*.proto&quot; -exec protoc --python_out=./generated {} \;

# With include paths
protoc -I./protos -I./vendor -I./third_party \
  --python_out=./generated \
  protos/user.proto protos/order.proto
</code></pre>
<h4 id="descriptor-sets">Descriptor Sets</h4>
<pre><code class="language-bash"># Generate descriptor set (for reflection)
protoc --descriptor_set_out=user.desc --include_imports user.proto

# Generate descriptor set with source info
protoc --descriptor_set_out=user.desc \
  --include_imports --include_source_info user.proto
</code></pre>
<h4 id="custom-plugins">Custom Plugins</h4>
<pre><code class="language-bash"># Use custom plugin
protoc --plugin=protoc-gen-custom=./my-plugin \
  --custom_out=./generated user.proto

# Plugin with options
protoc --plugin=protoc-gen-validate=protoc-gen-validate \
  --validate_out=&quot;lang=go:./generated&quot; user.proto
</code></pre>
<h2 id="build-integration">Build Integration</h2>
<h3 id="makefile">Makefile</h3>
<pre><code class="language-makefile"># Variables
PROTO_FILES = $(wildcard protos/*.proto)
GENERATED_GO = $(PROTO_FILES:protos/%.proto=generated/%.pb.go)
GENERATED_PY = $(PROTO_FILES:protos/%.proto=generated/%_pb2.py)

# Go generation
generated/%.pb.go: protos/%.proto
    protoc --go_out=generated --go_opt=paths=source_relative $&lt;

# Python generation
generated/%_pb2.py: protos/%.proto
    protoc --python_out=generated $&lt;

# Targets
.PHONY: go python clean
go: $(GENERATED_GO)
python: $(GENERATED_PY)

clean:
    rm -rf generated/*

all: go python
</code></pre>
<h3 id="cmake">CMake</h3>
<pre><code class="language-cmake"># Find protobuf
find_package(protobuf REQUIRED)

# Function to compile protobuf files
function(compile_proto_files)
    foreach(proto_file ${ARGN})
        get_filename_component(proto_name ${proto_file} NAME_WE)
        get_filename_component(proto_dir ${proto_file} DIRECTORY)

        set(generated_files
            ${CMAKE_CURRENT_BINARY_DIR}/${proto_name}.pb.h
            ${CMAKE_CURRENT_BINARY_DIR}/${proto_name}.pb.cc
        )

        add_custom_command(
            OUTPUT ${generated_files}
            COMMAND protobuf::protoc
            ARGS --cpp_out=${CMAKE_CURRENT_BINARY_DIR}
                 -I${proto_dir}
                 ${proto_file}
            DEPENDS ${proto_file}
        )

        list(APPEND PROTO_GENERATED_FILES ${generated_files})
    endforeach()

    set(PROTO_GENERATED_FILES ${PROTO_GENERATED_FILES} PARENT_SCOPE)
endfunction()

# Usage
compile_proto_files(protos/user.proto protos/order.proto)
add_executable(myapp main.cpp ${PROTO_GENERATED_FILES})
target_link_libraries(myapp protobuf::libprotobuf)
</code></pre>
<h3 id="bazel">Bazel</h3>
<pre><code class="language-python"># BUILD file
load(&quot;@rules_proto//proto:defs.bzl&quot;, &quot;proto_library&quot;)
load(&quot;@io_grpc_grpc_java//:java_grpc_library.bzl&quot;, &quot;java_grpc_library&quot;)

proto_library(
    name = &quot;user_proto&quot;,
    srcs = [&quot;user.proto&quot;],
    deps = [
        &quot;@com_google_protobuf//:timestamp_proto&quot;,
    ],
)

java_proto_library(
    name = &quot;user_java_proto&quot;,
    deps = [&quot;:user_proto&quot;],
)

java_grpc_library(
    name = &quot;user_java_grpc&quot;,
    srcs = [&quot;:user_proto&quot;],
    deps = [&quot;:user_java_proto&quot;],
)
</code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="schema-design">Schema Design</h3>
<pre><code class="language-proto">// Good: Use clear, descriptive names
message UserProfile {
  string full_name = 1;        // Better than 'name'
  string email_address = 2;    // Better than 'email'
  int64 created_timestamp = 3; // Better than 'created'
}

// Good: Group related fields
message Address {
  string street_line_1 = 1;
  string street_line_2 = 2;
  string city = 3;
  string state = 4;
  string postal_code = 5;
  string country_code = 6;
}

// Good: Use enums for fixed sets of values
enum UserRole {
  ROLE_UNSPECIFIED = 0;  // Always include zero value
  ROLE_USER = 1;
  ROLE_ADMIN = 2;
  ROLE_MODERATOR = 3;
}
</code></pre>
<h3 id="field-numbering">Field Numbering</h3>
<pre><code class="language-proto">message Product {
  // Reserve low numbers (1-15) for frequently used fields
  // They use 1 byte for tag encoding
  string name = 1;
  double price = 2;
  bool available = 3;

  // Higher numbers (16+) use 2+ bytes
  string detailed_description = 16;
  repeated string tags = 17;

  // Reserve ranges for future use
  reserved 4 to 10;
  reserved 100 to 200;
}
</code></pre>
<h3 id="versioning-and-evolution">Versioning and Evolution</h3>
<pre><code class="language-proto">// Original version
message User {
  string name = 1;
  string email = 2;
}

// Evolved version - backward compatible
message User {
  string name = 1;
  string email = 2;

  // New optional fields don't break compatibility
  optional int32 age = 3;
  repeated string interests = 4;

  // Nested messages can be added
  optional Address address = 5;
}
</code></pre>
<h3 id="performance-considerations">Performance Considerations</h3>
<pre><code class="language-proto">// Use appropriate field types for your data
message Metrics {
  // Use packed repeated for primitive arrays
  repeated int32 values = 1 [packed = true];

  // Consider fixed types for known-size data
  fixed64 timestamp_nanos = 2;  // Better than int64 for large numbers

  // Use bytes for binary data
  bytes thumbnail = 3;          // Not string for binary data

  // Consider string vs bytes for text
  string utf8_text = 4;         // For valid UTF-8
  bytes raw_text = 5;           // For potentially invalid UTF-8
}
</code></pre>
<h2 id="common-patterns">Common Patterns</h2>
<h3 id="requestresponse-patterns">Request/Response Patterns</h3>
<pre><code class="language-proto">// Standard CRUD operations
service UserService {
  rpc CreateUser(CreateUserRequest) returns (CreateUserResponse);
  rpc GetUser(GetUserRequest) returns (GetUserResponse);
  rpc UpdateUser(UpdateUserRequest) returns (UpdateUserResponse);
  rpc DeleteUser(DeleteUserRequest) returns (DeleteUserResponse);
  rpc ListUsers(ListUsersRequest) returns (ListUsersResponse);
}

message CreateUserRequest {
  User user = 1;
}

message CreateUserResponse {
  User user = 1;
  string message = 2;
}

message GetUserRequest {
  string user_id = 1;
}

message GetUserResponse {
  User user = 1;
}

// Pagination pattern
message ListUsersRequest {
  int32 page_size = 1;
  string page_token = 2;
  string filter = 3;
}

message ListUsersResponse {
  repeated User users = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}
</code></pre>
<h3 id="error-handling">Error Handling</h3>
<pre><code class="language-proto">import &quot;google/rpc/status.proto&quot;;
import &quot;google/protobuf/any.proto&quot;;

message ErrorResponse {
  google.rpc.Status status = 1;  // Standard error status
  string message = 2;            // Human-readable message
  repeated google.protobuf.Any details = 3;  // Additional error details
}

// Custom error details
message ValidationError {
  repeated FieldError field_errors = 1;
}

message FieldError {
  string field = 1;
  string message = 2;
  string code = 3;
}
</code></pre>
<h2 id="gotchas-and-common-mistakes">Gotchas and Common Mistakes</h2>
<h3 id="field-number-management">Field Number Management</h3>
<pre><code class="language-proto">// DON'T: Reuse field numbers
message User {
  string name = 1;
  // string old_email = 2;  // Removed field
  string email = 2;         // DON'T reuse number 2
}

// DO: Reserve removed field numbers
message User {
  reserved 2;  // or: reserved &quot;old_email&quot;;
  string name = 1;
  string email = 3;  // Use new number
}
</code></pre>
<h3 id="default-values-and-presence">Default Values and Presence</h3>
<pre><code class="language-proto">// Proto3: Cannot distinguish between default value and not set
message User {
  int32 age = 1;  // age=0 could mean &quot;not set&quot; or actually 0
}

// Solution: Use optional or wrapper types
import &quot;google/protobuf/wrappers.proto&quot;;

message User {
  optional int32 age = 1;  // Can detect presence
  // or
  google.protobuf.Int32Value age_wrapper = 2;
}
</code></pre>
<h3 id="package-and-import-issues">Package and Import Issues</h3>
<pre><code class="language-proto">// File: protos/user.proto
syntax = &quot;proto3&quot;;
package myapp.user;  // Use consistent package naming

import &quot;protos/common.proto&quot;;  // Use relative paths consistently

// File: protos/common.proto
syntax = &quot;proto3&quot;;
package myapp.common;  // Must match directory structure
</code></pre>
<h3 id="compilation-ordering">Compilation Ordering</h3>
<pre><code class="language-bash"># Wrong: May fail if dependencies aren't found
protoc --python_out=. user.proto

# Right: Include all necessary import paths
protoc -I. -I./vendor -I./third_party --python_out=. user.proto
</code></pre>
<h2 id="quick-reference">Quick Reference</h2>
<h3 id="essential-protoc-flags">Essential protoc Flags</h3>
<table>
<thead>
<tr>
<th>Flag</th>
<th>Purpose</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--version</code></td>
<td>Show protoc version</td>
<td><code>protoc --version</code></td>
</tr>
<tr>
<td><code>-I, --proto_path</code></td>
<td>Add import directory</td>
<td><code>protoc -I./protos</code></td>
</tr>
<tr>
<td><code>--python_out</code></td>
<td>Generate Python code</td>
<td><code>--python_out=./gen</code></td>
</tr>
<tr>
<td><code>--go_out</code></td>
<td>Generate Go code</td>
<td><code>--go_out=.</code></td>
</tr>
<tr>
<td><code>--java_out</code></td>
<td>Generate Java code</td>
<td><code>--java_out=./src</code></td>
</tr>
<tr>
<td><code>--cpp_out</code></td>
<td>Generate C++ code</td>
<td><code>--cpp_out=./gen</code></td>
</tr>
<tr>
<td><code>--descriptor_set_out</code></td>
<td>Generate descriptor</td>
<td><code>--descriptor_set_out=desc.pb</code></td>
</tr>
<tr>
<td><code>--include_imports</code></td>
<td>Include dependencies in descriptor</td>
<td>Use with <code>--descriptor_set_out</code></td>
</tr>
</tbody>
</table>
<h3 id="scalar-type-mapping">Scalar Type Mapping</h3>
<table>
<thead>
<tr>
<th>Proto Type</th>
<th>Go</th>
<th>Python</th>
<th>Java</th>
<th>C++</th>
<th>JavaScript</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>double</code></td>
<td><code>float64</code></td>
<td><code>float</code></td>
<td><code>double</code></td>
<td><code>double</code></td>
<td><code>number</code></td>
</tr>
<tr>
<td><code>float</code></td>
<td><code>float32</code></td>
<td><code>float</code></td>
<td><code>float</code></td>
<td><code>float</code></td>
<td><code>number</code></td>
</tr>
<tr>
<td><code>int32</code></td>
<td><code>int32</code></td>
<td><code>int</code></td>
<td><code>int</code></td>
<td><code>int32</code></td>
<td><code>number</code></td>
</tr>
<tr>
<td><code>int64</code></td>
<td><code>int64</code></td>
<td><code>int</code></td>
<td><code>long</code></td>
<td><code>int64</code></td>
<td><code>string</code></td>
</tr>
<tr>
<td><code>string</code></td>
<td><code>string</code></td>
<td><code>str</code></td>
<td><code>String</code></td>
<td><code>string</code></td>
<td><code>string</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td><code>bool</code></td>
<td><code>bool</code></td>
<td><code>boolean</code></td>
<td><code>bool</code></td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><code>bytes</code></td>
<td><code>[]byte</code></td>
<td><code>bytes</code></td>
<td><code>ByteString</code></td>
<td><code>string</code></td>
<td><code>Uint8Array</code></td>
</tr>
</tbody>
</table>
<hr />
<p><em>Protocol Buffers provide efficient, language-agnostic data serialization with strong schema evolution capabilities. Focus on clear field naming, proper type selection, and maintaining backward compatibility for production systems.</em></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
        <script src="../../search/main.js"></script>
      
    
  </body>
</html>